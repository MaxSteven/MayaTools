#! C:/Program Files/Nuke6.3v1/Nuke6.3.exe -nx
version 6.3 v1
add_layer {Point Point.red Point.green Point.blue}
Gizmo {
 inputs 3
 note_font Verdana
 mapsize {0.15 0.15}
 addUserKnob {20 PointTrack}
 addUserKnob {41 in l "point channel" T Shuffle.in}
 addUserKnob {12 trackpoint}
 trackpoint {961 843}
 addUserKnob {41 offset_3d l "3d offset" t "offset the picked point in 3d by this amount" T Axis1.translate}
 addUserKnob {12 offset_2d l "2d offset"}
 offset_2d {960 540}
 addUserKnob {22 track l "Track Point" T "format = nuke.root()\['format'].toScript()\nheight = int(format.split(' ')\[-3])\nwidth = int(format.split(' ')\[-4])\npt = nuke.thisNode()\ntrackx = pt\['trackpoint'].getValue()\[0]\ntracky = pt\['trackpoint'].getValue()\[1]\nstart = nuke.root()\['first_frame'].getValue()\nend = nuke.root()\['last_frame'].getValue()\nshuf = pt.node('Shuffle')\nx = shuf.sample('rgba.red',trackx,tracky)\ny = shuf.sample('rgba.green',trackx,tracky)\nz = shuf.sample('rgba.blue',trackx,tracky)\nrec = pt.node('Reconcile3D')\nrec\['point'].setValue(\[x,y,z])\npt\['offset_2d'].setValue(\[width*.5,height*.5])\nnuke.execute(rec.name(),start,end)\npt\['raw_track'].fromScript(rec\['output'].toScript())\npt\['translate'].fromScript('\{Transform.translate-offset_2d\} \{Transform.translate-offset_2d\}')" +STARTLINE}
 addUserKnob {20 TrackedPoint}
 addUserKnob {41 raw_track l "Raw Track" T Transform.translate}
 addUserKnob {12 translate}
 translate {{Transform.translate-offset_2d} {Transform.translate-offset_2d}}
}
 Input {
  inputs 0
  name img
  xpos -103
  ypos 49
 }
 Transform {
  name Transform
  selected true
  xpos -103
  ypos 151
 }
 Output {
  name Output1
  xpos -103
  ypos 289
 }
 Input {
  inputs 0
  name points
  xpos 20
  ypos 50
  number 2
 }
 Shuffle {
  in Point
  name Shuffle
  xpos 20
  ypos 145
 }
 Axis2 {
  inputs 0
  name Axis1
  xpos -389
  ypos 130
 }
 Input {
  inputs 0
  name camera
  xpos -257
  ypos 47
  number 1
 }
push 0
 Reconcile3D {
  inputs 3
  point {5596.625 10170.75 3203.375}
  output {{curve x1 1233.447998 1233.334106 1233.154907 1232.919556 1232.637207 1232.318237 1231.971313 1231.606567 1231.233398 1230.860962 1230.498413 1230.153931 1229.83606 1229.552124 1229.309692 1229.115479 1228.975708 1228.896484 1228.883301 1228.94104 1229.074585 1229.288208 1229.740601 1230.064453 1230.543579 1231.115112 1231.622559 1232.047241 1232.444946 1233.021362 1233.665283 1234.111206 1234.015747 1234.411377 1234.452881 1235.453247 1236.029785 1236.839844 1237.761353 1238.449585 1239.271851 1240.150391 1240.904907 1241.468994 1242.162842 1242.949707 1243.895508 1244.742432 1245.678223 1246.574097 1247.790649 1248.64209 1249.937378 1251.074951 1252.522339 1253.833496 1255.98645 1257.716675 1259.598511 1262.107422 1264.345703 1266.971069 1270.219604 1274.558594 1279.376953 1285.160156 1292.602417 1300.977295 1310.475586 1321.026489 1333.43457 1345.616821 1362.916748 1383.286255 1404.475708 1427.379639 1451.567505 1475.25293 1501.666016 1525.666504 1556.644287 1588.511597 1620.313965 1649.454468 1680.034058 1715.51062 1748.203247 1781.314697 1810.424072 1810.424072} {curve x1 523.1203613 525.3417969 528.9160156 533.7394409 539.7072144 546.7150269 554.6585693 563.4349365 572.9396973 583.0699463 593.7223511 604.7944946 616.1829224 627.7849731 639.4976196 651.2176514 662.8414307 674.2648315 685.383606 696.0914917 706.2836304 715.8529663 732.5898438 749.7868652 766.6607056 784.0830078 801.5079956 818.9949341 837.0185547 854.6358032 872.9811401 891.3595581 909.7921753 926.5812378 943.862915 960.3674927 977.741333 994.3047485 1011.018921 1027.419312 1043.20813 1058.96228 1074.654419 1090.331665 1105.728882 1120.966064 1135.49353 1149.71167 1164.010132 1177.655396 1191.518677 1205.887451 1220.701172 1236.471558 1253.345337 1270.468994 1288.43811 1306.786987 1328.244507 1353.497192 1381.644531 1412.550903 1449.093262 1492.872803 1544.08252 1605.028442 1682.415527 1768.482056 1861.197144 1957.979248 2072.064697 2200.104736 2336.321045 2518.775635 2691.398438 2867.241455 3054.480469 3238.687988 3431.545166 3616.292236 3856.206543 4086.614258 4315.194824 4530.698242 4745.576172 4990.386719 5213.59082 5437.646973 5640.452637 5640.452637}}
  outputxyz {{curve x1 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625 5596.625} {curve x1 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75 10170.75} {curve x1 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375 3203.375}}
  name Reconcile3D
  xpos -257
  ypos 145
 }
end_group
